executionFrameworkSpec:
  name: 'standalone'
  segmentGenerationJobRunnerClassName: 'org.apache.pinot.plugin.ingestion.batch.standalone.SegmentGenerationJobRunner'
  segmentTarPushJobRunnerClassName: 'org.apache.pinot.plugin.ingestion.batch.standalone.SegmentTarPushJobRunner'

jobType: SegmentCreationAndTarPush

#  Read input data directly from MinIO
inputDirURI: 's3://pinot-input-data'
includeFileNamePattern: 'glob:**/*.json'

# Local output dir inside the container (for segment generation)
outputDirURI: '/opt/pinot/data/movies/'
overwriteOutput: true

#  Define Pinot filesystem specs â€” now using S3PinotFS for MinIO
pinotFSSpecs:
  - scheme: s3
    className: org.apache.pinot.plugin.filesystem.S3PinotFS
    configs:
      accessKey: 'minioadmin'
      secretKey: 'minioadmin'
      region: 'us-east-1'
      endpoint: 'http://minio:9000'
      disableAcl: 'true'

recordReaderSpec:
  dataFormat: 'json'
  className: 'org.apache.pinot.plugin.inputformat.json.JSONRecordReader'

tableSpec:
  tableName: 'movies'

pinotClusterSpecs:
  #- controllerURI: 'http://localhost:9002'  # using 9002 (since 9000 is MinIO)
  - controllerURI: 'http://pinot-controller-json:9000'


pushJobSpec:
  pushParallelism: 2
  pushAttempts: 2
